<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Display Data</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <style>
    * {
      padding: 0;
      margin: 0;

    }

    .flex {}



    .flex2 {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    body {
      width: 100vw;
      height: 100vh;
      margin: auto;
      background-color: rgb(255, 255, 255);

        {
          {
          !-- display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          --
        }
      }
    }

    #dataContainer {
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      /*margin: auto;
    
      display: grid;
      width: 80%;
      grid-template-columns: repeat(4, auto);
      gap: 20px;*/

    }

    .secondContainer {

      display: flex;
      justify-content: space-evenly;

    }




    .dialogbox {
      width: 60%;
      height: 20%;
      margin: auto;
      margin-left: 20%;
      background-color: bisque;
      position: fixed;
      top: 0;
      z-index: 10;
      box-shadow: 5px 10px #888888;
      color: rgb(221, 162, 139);
      font-size: xxx-large;
      font-weight: 600;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .mynav {
      background-color: rgb(63, 49, 49);
    }

    .abcdef {
      width: 18rem;
      position: relative;

      box-shadow: 2px 2px 5px #504e4e83;
      background-color: rgb(255, 255, 255);
      padding: 0;
    }

    .carouselClass {
      margin-bottom: 20px;



    }

    .carouselClass2 {}

    .card-img-top {
      height: 15rem;
    }

    .w {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
  </style>

</head>

<body>
  <div id="dialogbox" class="container-fluid dialogbox">Dear user, Welcome to MyBlog.com</div>
  
  <div class="container w">

    <div class="container carouselClass">
      <div id="carouselExampleCaptions" class="carousel slide carouselClass2">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
            aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
            aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
            aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="https://picsum.photos/1024/500?grayscale" class="d-block w-100 image-fluid" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>First slide label</h5>
              <p>Some representative placeholder content for the first slide.</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="https://picsum.photos/seed/picsum/1024/500" class="d-block w-100 image-fluid" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Second slide label</h5>
              <p>Some representative placeholder content for the second slide.</p>
            </div>
          </div>
          <div class="carousel-item">
            <img src="https://picsum.photos/seed/picsum/1024/500" class="d-block w-100 image-fluid" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Third slide label</h5>
              <p>Some representative placeholder content for the third slide.</p>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
          data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
          data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
 
   <div class="cont container">
        <div class="card mb-3" style="max-width: 540px;">
  <div class="row g-0">
    <div class="col-md-4">
      <img src="..." class="img-fluid rounded-start" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">Card title</h5>
        <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
        <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
      </div>
    </div>
  </div>
</div>
   </div>


    <div id="dataContainer" class="container" style="padding-right: 0;">
      <div id="dataContainerRow" class="secondContainer row" style="margin: 0 0;">

      </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>

    <script>


      // Fetch data from the server and display it --}}
      const socket = io()
      socket.emit('new-user-joined')

      socket.on('hello-new-user', (datajson) => {
        setTimeout(() => {
          const div = document.getElementById('dialogbox')
          div.style.display = 'none';
        }, 2000)
      })

      socket.on('new-blog-added', (data) => {
        console.log(data)
        alert(`New blog Added!! \n
             Name: ${data.fname} ${data.lname} 
      `)
      })



      console.log('inin')
      var users = {}

      function divClickHandler(itemId) {
        return function (event) {
          const queryParams = new URLSearchParams({ id: itemId }).toString();
          console.log(itemId)
          // Navigate to the new page with additional details
          window.location.href = '/newpage?' + queryParams;


        };

      }

      const getdata = async () => {
        let response = await fetch('/getdata')
        let result = await response.json()
        const dataContainer = document.getElementById('dataContainer');
        const dataContainerRow = document.getElementById('dataContainerRow')

        console.log(result)
        /* <div class="card" style="width: 18rem;">
    <img class="card-img-top" src="..." alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title">Card title</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
      <a href="#" class="btn btn-primary">Go somewhere</a>
    </div>
  </div> */

        result.forEach(item => {
          const div = document.createElement(`div`);


          //   div.addEventListener('click', divClickHandler(item._id));
          console.log(item._id)
          div.classList.add('imgdiv')
          div.classList.add('card')
          div.classList.add('m-3')
          div.classList.add('abcdef')

          div.id = item.id;

          const img = document.createElement('img');
          // img.src = 'https://picsum.photos/seed/picsum/1000/600';
          img.src = 'https://th.bing.com/th/id/R.be080585c0da64067404b23530a814ce?rik=vjGDbB2xFyn9Sw&riu=http%3a%2f%2fwallup.net%2fwp-content%2fuploads%2f2016%2f03%2f10%2f318375-nature-landscape-lake-mountain-forest-wildflowers-spring-pine_trees-path-Switzerland-HDR.jpg&ehk=W21nAe%2fQYSWkLQF83VxX2RflaJ7eKm%2fm0J4pW85PpjU%3d&risl=&pid=ImgRaw&r=0'


          img.classList.add('card-img-top')
          img.classList.add('image-fluid')
          img.style.margin = '0'
          // Attach click event listener to the div
          div.appendChild(img);

          const childDiv = document.createElement(`div`);

          const title = document.createElement('h2');
          title.textContent = item.fname + " " + item.lname;
          title.classList.add('text')
          title.classList.add('card-title')
          childDiv.classList.add('card-body')
          childDiv.appendChild(title);

          const p = document.createElement('p')
          let str = "The Statue of Unity stands tall as an iconic symbol of unity, strength, and pride for the people of India. Located in the state of Gujarat, this colossal statue pays homage to Sardar Vallabhbhai Patel, a key figure in India's struggle for independence and the country's first Deputy Prime Minister. Rising to a height of 182 meters (597 feet), it holds the title of the world's tallest statue, dwarfing other monumental"

          let limit = 70
          let actual_str = str.substring(0, limit)
          actual_str = actual_str + "..."
          console.log(actual_str)
          p.classList.add('card-text')
          p.textContent = actual_str
          childDiv.appendChild(p)

          const a = document.createElement('a')
          a.style.marginBottom = '20px'
          a.textContent = 'Know More'
          a.classList.add('btn')
          a.classList.add('btn-primary')
          a.addEventListener('click', divClickHandler(item._id))
          a.style.margin = '10px'

          div.appendChild(childDiv)
          div.appendChild(a)

          dataContainerRow.appendChild(div);


        })

      }

      getdata()

    </script>




  </div>
</body>

</html>